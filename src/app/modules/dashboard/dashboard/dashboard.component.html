<section class="fuel-prices">
	<main>		
		<!-- <div class="panel">
			<nb-icon icon="menu-outline"></nb-icon>
		</div> -->
		<div class="panel u-flex headline">
			<h3>Aktuální cena</h3>
			<button class="button" (click)="onAdd($event)"><nb-icon icon="plus"></nb-icon>Přidat</button>
		</div>
		<div class="panel sticky">			
			<div class="col-md-3 latest-price" *ngIf="latest">
				<div class="latest-price__wrap">
					<p>
						<label>Nafta:</label>
						<span class="big-number">{{ latest.crude.price | currency: " " }}<span class="unit">Kč/l</span></span>
					</p>
					<p>
						<label>Benzín:</label>
						<span class="big-number">{{ latest.petrol.price | currency: " "}}<span class="unit">Kč/l</span></span>
					</p>	
				</div>
			</div>
		</div>
		<div class="panel valid" *ngIf="latest">
			<p>Platná od {{ latest.crude.from | date }} do {{ latest.crude.to | date }}.</p>
		</div>

		<!-- <div class="panel chart">
			<ngx-chartjs [data]="chartConfig" type="line"></ngx-chartjs>
		</div> -->

		<div *ngIf="$prices | async as prices" class="history">
			<h5>Historie</h5>
			<nb-tabset>
				<nb-tab tabTitle="Nafta">
					<div class="tab-container">
						<nb-list *ngFor="let item of prices | callback: filterPriceOlderWeek; trackBy: trackByFn">
							<nb-list-item *ngIf="item.fuel == 'crude'">
								<div class="row-item">
									<div class="date">{{ item.from | date }} - {{ item.to | date }}</div>
									<div class="price"><b>{{ item.price | currency }}/l</b></div>
								</div>
							</nb-list-item>
						</nb-list>
					</div>
				</nb-tab>
				<nb-tab tabTitle="Benzín">
					<div class="tab-container">
						<nb-list *ngFor="let item of prices | callback: filterPriceOlderWeek; trackBy: trackByFn">
							<nb-list-item *ngIf="item.fuel == 'petrol'">
								<div class="row-item">
									<div class="date">{{ item.from | date }} - {{ item.to | date }}</div>
									<div class="price"><b>{{ item.price | currency }}/l</b></div>
								</div>
							</nb-list-item>
						</nb-list>
					</div>
				</nb-tab>
			</nb-tabset>
			
		</div>
	</main>
	<footer>
		<p *ngIf="latest">
			Poslední aktualizace: <b>{{ latest.crude.from | amLocale: "cs" | amTimeAgo }}</b>
		</p>
	</footer>
</section>
